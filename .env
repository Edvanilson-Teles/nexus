# =============================================================================
# NEXUS - Clinical Laboratory Platform
# Environment Configuration File
# =============================================================================
# ATENÇÃO: Este arquivo contém informações sensíveis. Nunca commit no Git!
# =============================================================================

# =============================================================================
# 1. APPLICATION SETTINGS
# =============================================================================
NODE_ENV=development
PORT=3000
API_PREFIX=api
API_URL=http://localhost:3000
FRONTEND_URL=http://localhost:3001

# =============================================================================
# 2. DATABASE CONFIGURATION - PostgreSQL (Neon)
# =============================================================================
# Neon PostgreSQL Database Connection
DATABASE_URL=postgresql://neondb_owner:npg_nQCUWBRK8t5a@ep-damp-base-acu31a3d-pooler.sa-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require

# Detailed PostgreSQL Configuration
DB_TYPE=postgres
DB_HOST=ep-damp-base-acu31a3d-pooler.sa-east-1.aws.neon.tech
DB_PORT=5432
DB_USERNAME=neondb_owner
DB_PASSWORD=npg_nQCUWBRK8t5a
DB_NAME=neondb
DB_SSL=true
DB_SSL_REJECT_UNAUTHORIZED=false
DB_SYNCHRONIZE=true
DB_LOGGING=false
DB_MAX_CONNECTIONS=10
DB_CONNECTION_TIMEOUT=30000

# =============================================================================
# 3. JWT AUTHENTICATION
# =============================================================================
JWT_SECRET=nexus_clinical_lab_jwt_secret_key_change_in_production_2024
JWT_EXPIRATION=1h
JWT_REFRESH_SECRET=nexus_clinical_lab_jwt_refresh_secret_key_change_in_production_2024
JWT_REFRESH_EXPIRATION=7d

# =============================================================================
# 4. REDIS CACHE (Optional - comentado por padrão)
# =============================================================================
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DB=0
# REDIS_TTL=3600

# =============================================================================
# 5. CORS CONFIGURATION
# =============================================================================
CORS_ENABLED=true
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE
CORS_CREDENTIALS=true

# =============================================================================
# 6. STRIPE PAYMENT INTEGRATION
# =============================================================================
# Stripe Test Keys (substitua com suas próprias chaves)
STRIPE_API_KEY=sk_test_51...
STRIPE_PUBLISHABLE_KEY=pk_test_51...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_CURRENCY=BRL

# =============================================================================
# 7. AWS S3 FILE STORAGE (Optional)
# =============================================================================
# AWS_S3_BUCKET=nexus-clinical-files
# AWS_S3_REGION=sa-east-1
# AWS_ACCESS_KEY_ID=your_access_key_id
# AWS_SECRET_ACCESS_KEY=your_secret_access_key
# AWS_S3_ENDPOINT=

# =============================================================================
# 8. SMTP EMAIL SERVICE
# =============================================================================
# SMTP Configuration (exemplo com Gmail)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=seu-email@gmail.com
SMTP_PASSWORD=sua-senha-de-app
SMTP_FROM_NAME=Nexus Clinical Lab
SMTP_FROM_EMAIL=noreply@nexusclinical.com

# =============================================================================
# 9. FILE UPLOAD CONFIGURATION
# =============================================================================
UPLOAD_MAX_FILE_SIZE=10485760
UPLOAD_MAX_FILES=10
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document
UPLOAD_DESTINATION=./uploads

# =============================================================================
# 10. RATE LIMITING
# =============================================================================
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# =============================================================================
# 11. LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=debug
LOG_PRETTY=true
LOG_FILE_ENABLED=false
LOG_FILE_PATH=./logs

# =============================================================================
# 12. SECURITY SETTINGS
# =============================================================================
BCRYPT_ROUNDS=10
CSRF_ENABLED=false
SESSION_SECRET=nexus_clinical_lab_session_secret_change_in_production_2024
SESSION_MAX_AGE=86400000

# =============================================================================
# 13. BUSINESS CONFIGURATION
# =============================================================================
# Default Company Settings
DEFAULT_COMPANY_NAME=Nexus Clinical Laboratory
DEFAULT_COMPANY_CNPJ=00.000.000/0000-00
DEFAULT_COMPANY_EMAIL=contato@nexusclinical.com
DEFAULT_COMPANY_PHONE=(11) 0000-0000

# Report Settings
REPORT_EXPIRATION_DAYS=30
REPORT_SHARE_LINK_EXPIRATION_HOURS=168

# Invoice Settings
INVOICE_DUE_DAYS=30
INVOICE_LATE_FEE_PERCENTAGE=2
INVOICE_DISCOUNT_DAYS=5
INVOICE_DISCOUNT_PERCENTAGE=5

# Order Settings
ORDER_AUTO_CANCEL_HOURS=48
ORDER_COLLECTION_REMINDER_HOURS=24

# =============================================================================
# 14. WEBHOOKS
# =============================================================================
WEBHOOK_SIGNATURE_SECRET=nexus_webhook_signature_secret_change_in_production
WEBHOOK_TIMEOUT=30000

# =============================================================================
# 15. MONITORING & OBSERVABILITY (Optional)
# =============================================================================
# Sentry Error Tracking
# SENTRY_DSN=

# New Relic APM
# NEW_RELIC_LICENSE_KEY=
# NEW_RELIC_APP_NAME=Nexus Clinical Lab

# =============================================================================
# 16. FEATURE FLAGS
# =============================================================================
FEATURE_ENABLE_STRIPE=true
FEATURE_ENABLE_S3=false
FEATURE_ENABLE_REDIS=false
FEATURE_ENABLE_EMAIL=true
FEATURE_ENABLE_SMS=false
FEATURE_ENABLE_NOTIFICATIONS=true

# =============================================================================
# 17. DOCKER SETTINGS (Para uso com Docker)
# =============================================================================
# DOCKER_POSTGRES_HOST=postgres
# DOCKER_REDIS_HOST=redis

# =============================================================================
# 18. DEVELOPMENT HELPERS
# =============================================================================
SWAGGER_ENABLED=true
SWAGGER_PATH=api
DEBUG_MODE=true
SEED_DATA=false

# =============================================================================
# NOTAS IMPORTANTES:
# =============================================================================
# 1. Este arquivo .env está configurado com PostgreSQL (Neon) como banco principal
# 2. As credenciais do Neon já estão incluídas e prontas para uso
# 3. Para produção, altere todos os segredos (JWT, SESSION, WEBHOOK)
# 4. Nunca exponha este arquivo ao cliente (frontend)
# 5. Para desenvolvimento local, o servidor iniciará automaticamente com estas configurações
# 6. Serviços opcionais (Redis, S3, Email) estão comentados - descomente conforme necessário
#
# COMO USAR:
# 1. npm install --legacy-peer-deps
# 2. npm run start:dev
# 3. Acesse http://localhost:3000/api (Swagger)
#
# DATABASE: Conectado ao Neon PostgreSQL (sa-east-1)
# =============================================================================
